<!DOCTYPE html>

%% ## args: websocket_url

<html>
  <head>
    <title>Chat example using jQluster</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  </head>
  <body>
<pre id="chat-display">
Display:
</pre>


    <form id="chat-form">
      <ul>
        <li>Name: <input id="chat-name" type="text" value="" /></li>
        <li>Text: <input id="chat-content" type="text" value="" /></li>
        <li><input id="chat-submit" type="submit" value="SUBMIT" /></li>
      </ul>
    </form>
    <script src="/lib/jquery.js"></script>
    <script src="/lib/jquery.ellocate.js"></script>
    <script src="/lib/jquery.xpath.js"></script>
    <script src="/jqluster.js"></script>
    <script>
"use strict";

$(function() {
    $.jqluster.init("chat_example", "[% websocket_url | js %]");
    var $_ = $.jqluster("chat_example");
    $("#chat-form").on("submit", function() {
        var speak_content = $("#chat-content").val();
        var speaker_name = $("#chat-name").val();
        var line = jQluster.htmlEscape(speaker_name + ": " + speak_content + "\n");
        $("#chat-content").val("");
        $_("#chat-display").append(line);
        return false;
    });
});

    </script>
  </body>
</html>



